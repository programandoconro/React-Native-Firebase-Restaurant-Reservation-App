var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeTestingLibrary=require("react-native-testing-library");var _native=require("@react-navigation/native");var _createSwitchNavigator=_interopRequireDefault(require("../createSwitchNavigator"));var _jsxFileName="/Users/satya/Workspace/Callstack/react-navigation-core/src/navigators/__tests__/createSwitchnavigator-test.js";jest.mock('@react-navigation/core',function(){return require('../../index');});var getActiveRouteName=function getActiveRouteName(state){return state.routes[state.index].routeName;};var createScreen=function createScreen(routeName,nextRouteName){return function(props){return React.createElement(_reactNative.View,{__source:{fileName:_jsxFileName,lineNumber:11}},React.createElement(_reactNative.Text,{testID:"title",__source:{fileName:_jsxFileName,lineNumber:12}},routeName),React.createElement(_reactNative.Text,{testID:routeName+'-isFirstRoute',__source:{fileName:_jsxFileName,lineNumber:13}},String(props.navigation.isFirstRouteInParent())),React.createElement(_reactNative.TouchableOpacity,{testID:routeName+'-next',onPress:function onPress(){return props.navigation.navigate(nextRouteName);},__source:{fileName:_jsxFileName,lineNumber:16}},"Go to ",nextRouteName),React.createElement(_reactNative.TouchableOpacity,{testID:routeName+'-back',onPress:function onPress(){return props.navigation.goBack();},__source:{fileName:_jsxFileName,lineNumber:22}},"Go back"));};};it('renders switch navigator with initialRouteName',function(){var SwitchNavigator=(0,_createSwitchNavigator.default)({First:createScreen('First','Third'),Second:createScreen('Second','First'),Third:createScreen('Third','Second')},{initialRouteName:'Second'});var App=(0,_native.createAppContainer)(SwitchNavigator);var _render=(0,_reactNativeTestingLibrary.render)(React.createElement(App,{__source:{fileName:_jsxFileName,lineNumber:45}})),queryByText=_render.queryByText,getByTestId=_render.getByTestId;expect(queryByText('First')).toBeNull();expect(queryByText('Third')).toBeNull();expect(queryByText('Second')).not.toBeNull();_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-next'));expect(queryByText('First')).not.toBeNull();expect(queryByText('Third')).toBeNull();expect(queryByText('Second')).toBeNull();});it('uses backBehavior=none by default',function(){var SwitchNavigator=(0,_createSwitchNavigator.default)({First:createScreen('First','Third'),Second:createScreen('Second','First'),Third:createScreen('Third','Second')});var App=(0,_native.createAppContainer)(SwitchNavigator);var navigationRef=React.createRef();var _render2=(0,_reactNativeTestingLibrary.render)(React.createElement(App,{ref:navigationRef,__source:{fileName:_jsxFileName,lineNumber:69}})),getByTestId=_render2.getByTestId;expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Third');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Third-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');});it('uses backBehavior=initialRoute when specified',function(){var SwitchNavigator=(0,_createSwitchNavigator.default)({First:createScreen('First','Third'),Second:createScreen('Second','First'),Third:createScreen('Third','Second')},{backBehavior:'initialRoute'});var App=(0,_native.createAppContainer)(SwitchNavigator);var navigationRef=React.createRef();var _render3=(0,_reactNativeTestingLibrary.render)(React.createElement(App,{ref:navigationRef,__source:{fileName:_jsxFileName,lineNumber:102}})),getByTestId=_render3.getByTestId;expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Third');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Third-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');});it('uses backBehavior=order when specified',function(){var SwitchNavigator=(0,_createSwitchNavigator.default)({First:createScreen('First','Third'),Second:createScreen('Second','First'),Third:createScreen('Third','Second')},{backBehavior:'order'});var App=(0,_native.createAppContainer)(SwitchNavigator);var navigationRef=React.createRef();var _render4=(0,_reactNativeTestingLibrary.render)(React.createElement(App,{ref:navigationRef,__source:{fileName:_jsxFileName,lineNumber:135}})),getByTestId=_render4.getByTestId;expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Third');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Third-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');});it('uses backBehavior=history when specified',function(){var SwitchNavigator=(0,_createSwitchNavigator.default)({First:createScreen('First','Third'),Second:createScreen('Second','First'),Third:createScreen('Third','Second')},{backBehavior:'history'});var App=(0,_native.createAppContainer)(SwitchNavigator);var navigationRef=React.createRef();var _render5=(0,_reactNativeTestingLibrary.render)(React.createElement(App,{ref:navigationRef,__source:{fileName:_jsxFileName,lineNumber:168}})),getByTestId=_render5.getByTestId;expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Third');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Third-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-next'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Third');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Third-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('First');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-back'));expect(getActiveRouteName(navigationRef.current.state.nav)).toBe('Second');});it('returns correct value for canGoBack in a simple navigator',function(){var SwitchNavigator=(0,_createSwitchNavigator.default)({First:createScreen('First','Third'),Second:createScreen('Second','First'),Third:createScreen('Third','Second')},{backBehavior:'history'});var App=(0,_native.createAppContainer)(SwitchNavigator);var navigationRef=React.createRef();var _render6=(0,_reactNativeTestingLibrary.render)(React.createElement(App,{ref:navigationRef,__source:{fileName:_jsxFileName,lineNumber:217}})),getByTestId=_render6.getByTestId;expect(getByTestId('First-isFirstRoute').props.children).toBe('true');_reactNativeTestingLibrary.fireEvent.press(getByTestId('First-next'));expect(getByTestId('Third-isFirstRoute').props.children).toBe('false');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Third-next'));expect(getByTestId('Second-isFirstRoute').props.children).toBe('false');_reactNativeTestingLibrary.fireEvent.press(getByTestId('Second-back'));expect(getByTestId('Third-isFirstRoute').props.children).toBe('false');});
//# sourceMappingURL=createSwitchnavigator-test.js.map